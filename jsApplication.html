<html>
<head>
  <title>test</title>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="jsApplication.js"></script>
<script type="text/javascript">


var testApp = {

  myJSApp : {},

  init : function(  )
  {
    this.myJSApp = new jsApplication['Ajax']( );
  },

  getPaginatedStaticData : function( pageNumber )
  {
    this.myJSApp.subscribe( 'success', this, this.ajaxSuccess1 ).subscribe( 'error', this, this.ajaxErrorHandler );
    
    ajaxData = new StdDataObject( );
    ajaxData.setData( 'pageNumber', pageNumber );
    url = 'http://www.foo.com/static';

    this.myJSApp.setShouldMemoize( true ).doAjax( url, ajaxData );
  },

  getDynamicData : function( memberId )
  {
    this.myJSApp.subscribe( 'success', this, this.ajaxSuccess2 ).subscribe( 'error', this, this.ajaxErrorHandler );
    
    ajaxData = new StdDataObject( );
    ajaxData.setData( 'memberId', memberId );
    url = 'http://www.foo.com/dynamic';

    this.myJSApp.doAjax( url, ajaxData );
  },

  ajaxSuccess1 : function( data )
  {
    console.log('doing ajax success 1 and data = ');
    console.log( data );
  },

  ajaxSuccess2 : function( data )
  {
    console.log('doing ajax success 2 and data = ');
    console.log( data );
  },

  ajaxErrorHandler : function( msg )
  {
    console.log( 'error message = ' + msg );
  }

};


testApp.init();
// get page 1 of static content
testApp.getPaginatedStaticData( 1 );
// get page 2 of static content
testApp.getPaginatedStaticData( 2 );
// get page 1 of static content (again).  should fetch from cache
testApp.getPaginatedStaticData( 1 );
// contrived error case
testApp.getPaginatedStaticData( -1 );

// get dynamic data
testApp.getDynamicData( 12345678 );


</script>
</head>
<body>


</body>
</html>
